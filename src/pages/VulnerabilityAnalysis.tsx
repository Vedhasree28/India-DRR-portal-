
import React from 'react';
import { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, Legend, CartesianGrid } from 'recharts';
import Page from '../components/Page';
import Card from '../components/Card';
import ChoroplethMap from '../components/ChoroplethMap';
import { vulnerabilityIndicators, vulnerabilityDimensions, districts } from '../data/mockData';

const VulnerabilityAnalysis: React.FC = () => {
  return (
    <Page title="Vulnerability Analysis">
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="lg:col-span-1">
          <Card title="Indicators Used">
            <ul className="space-y-3">
              {vulnerabilityIndicators.map(indicator => (
                <li key={indicator.name} className="flex justify-between items-center text-gray-400">
                  <span>{indicator.name}</span>
                  <span className="font-semibold text-white bg-gray-700 px-2 py-1 rounded">{indicator.value}</span>
                </li>
              ))}
            </ul>
          </Card>
        </div>
        <div className="lg:col-span-2">
          <Card title="Vulnerability Dimensions">
             <div className="h-96">
                <ResponsiveContainer width="100%" height="100%">
                    <RadarChart cx="50%" cy="50%" outerRadius="80%" data={vulnerabilityDimensions}>
                        <PolarGrid stroke="#4a5568" />
                        <PolarAngleAxis dataKey="dimension" stroke="#a0aec0" />
                        <PolarRadiusAxis angle={30} domain={[0, 100]} stroke="#4a5568" />
                        <Radar name="Vulnerability Score" dataKey="score" stroke="#38b2ac" fill="#38b2ac" fillOpacity={0.6} />
                        <Tooltip contentStyle={{ backgroundColor: '#2d3748', border: 'none' }}/>
                    </RadarChart>
                </ResponsiveContainer>
            </div>
          </Card>
        </div>
      </div>
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card title="Indicator Comparison">
          <div className="h-96">
            <ResponsiveContainer width="100%" height="100%">
              <BarChart data={vulnerabilityIndicators} layout="vertical">
                <CartesianGrid strokeDasharray="3 3" stroke="#4a5568" />
                <XAxis type="number" stroke="#a0aec0" />
                <YAxis type="category" width={150} dataKey="name" stroke="#a0aec0" />
                <Tooltip contentStyle={{ backgroundColor: '#2d3748', border: 'none' }}/>
                <Legend />
                <Bar dataKey="value" fill="#319795" />
              </BarChart>
            </ResponsiveContainer>
          </div>
        </Card>
        <Card title="District-wise Vulnerability Index">
            <div className="h-96 rounded-lg overflow-hidden border border-gray-700">
                 <ChoroplethMap data={districts} displayMetric="vulnerabilityIndex" />
            </div>
        </Card>
      </div>
    </Page>
  );
};

export default VulnerabilityAnalysis;
